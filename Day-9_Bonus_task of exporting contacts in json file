###Bonus task-9 Export Contacts
import json
import os
def load_contacts():
    if os.path.exists("contacts.json"):
        with open("contacts.json", "r") as f:
            try:
                data = f.read().strip()
                if not data:   # file is empty
                    return {}
                return json.loads(data)
            except json.JSONDecodeError:
                return {}
    return {}

def save_contacts(contacts):
    with open("contacts.json","w") as f:
        json.dump(contacts,f,indent=4)
def export_contacts(contacts):
    if not contacts:
        print("‚ùå No Contacts to Export")
    try:
        with open("Exported_contacts.json","w") as f:
            json.dump(contacts,f,indent=4)
            print("‚úî Contacts successfully exported to Exported_contacts.json")
    except Exception as e:
        print(f"Error exporting the contacts: {e}")

contacts = load_contacts()
while True:
    print("\n-------üìóContact Book------")
    print("1.Add contacts")
    print("2.search contacts")
    print("3.Show all contacts")
    print("4.Export contacts (JSON)")
    print("5.Delete contacts")
    print("6. Exit")
    choices=input("Enter your choice from 1-6: ")
    if choices == "1":
        name=input("Enter  name: ")
        phone =input("Enter phone number: ")
        contacts[name]=phone
        print("contact saved successfully")
    elif choices=="2":
        name=input("Enter name you want to search: ")
        if name in contacts:
            print(f"üìû{name}--->{contacts[name]}")
        else:
            print("‚ùåcontact not found")
    elif choices=="3":
        print("\n All contacts")
        for name,phone in contacts.items():
            print(f"üìû{name}--->{phone}")
    elif choices=="4":
        export_contacts(contacts)
    elif choices =="5":
        name=input("Enter name you want to delete: ")
        if name in contacts:
            del contacts[name]
            save_contacts(contacts)
    elif choices=="6":
        print("Exiting the contact book,bye!")
    else:
        print("‚ùåInvalid choice! Try again")
